@tailwind base;
@tailwind components;
@tailwind utilities;

/* RadReport Design System - Medical Dark Theme Professional */

@layer base {
  :root {
    /* Light Theme - Tema Claro Profissional Médico */
    --background: 0 0% 100%;
    --foreground: 220 26% 14%;
    --bg: 0 0% 100%;
    --text: 220 26% 14%;
    
    --card: 0 0% 98%;
    --card-foreground: 220 26% 14%;
    
    --popover: 0 0% 100%;
    --popover-foreground: 220 26% 14%;
    
    /* Medical Cyan/Indigo Accent System */
    --primary: 189 94% 35%;
    --primary-foreground: 0 0% 100%;
    
    --secondary: 231 48% 48%;
    --secondary-foreground: 0 0% 100%;
    
    --muted: 220 14% 96%;
    --muted-foreground: 220 9% 46%;
    
    --accent: 189 94% 35%;
    --accent-foreground: 0 0% 100%;
    
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;
    
    --border: 220 13% 91%;
    --input: 220 13% 91%;
    --ring: 189 94% 35%;
    --divider: 220 13% 91%;
    
    --radius: 0.75rem;
    
    /* Medical Gradients */
    --gradient-medical: linear-gradient(135deg, hsl(189 94% 35%) 0%, hsl(231 48% 48%) 100%);
    --gradient-subtle: linear-gradient(180deg, hsl(0 0% 100%) 0%, hsl(220 14% 96%) 100%);
    --gradient-hero: linear-gradient(135deg, hsl(0 0% 100%) 0%, hsl(231 48% 95%) 50%, hsl(189 94% 95%) 100%);
    
    /* Glassmorphism */
    --glass-bg: hsla(0, 0%, 100%, 0.8);
    --glass-border: hsla(189, 94%, 35%, 0.2);
    
    /* Shadows */
    --shadow-glow: 0 0 40px hsla(189, 94%, 35%, 0.15);
    --shadow-elegant: 0 10px 30px -10px hsla(0, 0%, 0%, 0.1);
    
    /* Typography Scale */
    --fs-xs: 0.75rem;
    --fs-sm: 0.875rem;
    --fs-base: 1rem;
    --fs-lg: 1.125rem;
    --fs-xl: 1.25rem;
    --fs-2xl: 1.5rem;
    --fs-3xl: 1.875rem;
    --fs-4xl: 2.25rem;
    --fs-xxl: 3rem;
    
    /* Sidebar */
    --sidebar-background: 0 0% 98%;
    --sidebar-foreground: 220 26% 14%;
    --sidebar-primary: 189 94% 35%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 231 48% 48%;
    --sidebar-accent-foreground: 0 0% 100%;
    --sidebar-border: 220 13% 91%;
    --sidebar-ring: 189 94% 35%;
    
    /* Z-index Scale */
    --z-base: 1;
    --z-dropdown: 1000;
    --z-sticky: 1020;
    --z-fixed: 1030;
    --z-modal-backdrop: 1040;
    --z-modal: 1050;
    --z-popover: 1060;
    --z-tooltip: 1070;
    --z-float: 10;
  }

  .dark {
    /* Dark Theme - Tema Escuro Médico Profissional */
    --background: 220 26% 8%;
    --foreground: 210 40% 98%;
    --bg: 220 26% 8%;
    --text: 210 40% 98%;
    
    --card: 220 20% 12%;
    --card-foreground: 210 40% 98%;
    
    --popover: 220 20% 12%;
    --popover-foreground: 210 40% 98%;
    
    --primary: 189 94% 43%;
    --primary-foreground: 220 26% 8%;
    
    --secondary: 231 48% 48%;
    --secondary-foreground: 210 40% 98%;
    
    --muted: 217 25% 20%;
    --muted-foreground: 215 20.2% 65.1%;
    
    --accent: 189 94% 43%;
    --accent-foreground: 220 26% 8%;
    
    --destructive: 0 62.8% 50.6%;
    --destructive-foreground: 210 40% 98%;
    
    --border: 217 25% 20%;
    --input: 217 25% 20%;
    --ring: 189 94% 43%;
    --divider: 217 25% 20%;
    
    /* Medical Gradients */
    --gradient-medical: linear-gradient(135deg, hsl(189 94% 43%) 0%, hsl(231 48% 48%) 100%);
    --gradient-subtle: linear-gradient(180deg, hsl(220 26% 8%) 0%, hsl(220 20% 12%) 100%);
    --gradient-hero: linear-gradient(135deg, hsl(220 26% 8%) 0%, hsl(231 48% 15%) 50%, hsl(189 94% 15%) 100%);
    
    /* Glassmorphism */
    --glass-bg: hsla(220, 20%, 12%, 0.4);
    --glass-border: hsla(189, 94%, 43%, 0.2);
    
    /* Shadows */
    --shadow-glow: 0 0 40px hsla(189, 94%, 43%, 0.3);
    --shadow-elegant: 0 10px 30px -10px hsla(0, 0%, 0%, 0.5);
    
    --sidebar-background: 220 20% 12%;
    --sidebar-foreground: 210 40% 98%;
    --sidebar-primary: 189 94% 43%;
    --sidebar-primary-foreground: 220 26% 8%;
    --sidebar-accent: 231 48% 48%;
    --sidebar-accent-foreground: 210 40% 98%;
    --sidebar-border: 217 25% 20%;
    --sidebar-ring: 189 94% 43%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground font-sans antialiased;
  }
  
  h1, h2, h3, h4, h5, h6 {
    @apply font-bold tracking-tight;
  }
}

@layer components {
  /* Glass Card with Medical Theme */
  .glass-card {
    @apply backdrop-blur-xl bg-[var(--glass-bg)] border border-[var(--glass-border)] shadow-[var(--shadow-elegant)];
  }
  
  /* Premium Button with Glow */
  .btn-premium {
    @apply bg-gradient-to-r from-cyan-400 to-indigo-500 text-white font-semibold 
           shadow-[var(--shadow-glow)] hover:brightness-110 transition-all duration-300
           active:scale-95;
  }
  
  /* Enhanced Form Input */
  .form-input-enhanced {
    @apply bg-white/10 border border-white/20 text-white placeholder-white/50
           focus:outline-none focus:ring-2 focus:ring-cyan-400 focus:border-transparent
           transition-all duration-200;
  }
  
  /* Login Hero Container */
  .login-hero-container {
    @apply min-h-screen flex items-center justify-center relative;
    background: linear-gradient(135deg, hsl(220, 26%, 8%) 0%, hsl(231, 48%, 12%) 50%, hsl(189, 94%, 10%) 100%);
  }
  
  /* Login Hero Glow Effect */
  .login-hero-glow {
    @apply absolute inset-0 pointer-events-none;
    background: radial-gradient(circle at 50% 50%, hsla(189, 94%, 43%, 0.15) 0%, transparent 50%);
  }
  
  /* Hover Scale Animation */
  .hover-scale {
    @apply transition-transform duration-200 hover:scale-105;
  }
  
  /* Story Link Underline Animation */
  .story-link {
    @apply relative inline-block after:content-[''] after:absolute after:w-full 
           after:scale-x-0 after:h-0.5 after:bottom-0 after:left-0 after:bg-primary 
           after:origin-bottom-right after:transition-transform after:duration-300 
           hover:after:scale-x-100 hover:after:origin-bottom-left;
  }
  
  /* Shadow Glow Utility */
  .shadow-glow {
    box-shadow: var(--shadow-glow);
  }
  
  /* Medical Gradient Text */
  .gradient-text-medical {
    @apply bg-gradient-to-r from-cyan-400 via-cyan-200 to-indigo-400 bg-clip-text text-transparent;
  }
}

@layer utilities {
  /* Z-index utilities */
  .z-float {
    z-index: var(--z-float);
  }
  
  .z-dropdown {
    z-index: var(--z-dropdown);
  }
  
  .z-modal {
    z-index: var(--z-modal);
  }

  /* TipTap Editor Styles - Dual Theme Support */
  .tiptap {
    @apply prose prose-slate dark:prose-invert max-w-none;
    @apply focus:outline-none;
    @apply min-h-[400px];
  }

  .tiptap p.is-editor-empty:first-child::before {
    @apply text-muted-foreground pointer-events-none float-left h-0;
    content: attr(data-placeholder);
  }

  /* Headings */
  .tiptap h1 { 
    @apply text-2xl font-bold mb-4;
    color: hsl(var(--primary));
  }

  .tiptap h2 { 
    @apply text-xl font-semibold mb-3;
    color: hsl(var(--foreground));
  }

  .tiptap h3 { 
    @apply text-lg font-medium mb-2;
    color: hsl(var(--foreground));
  }

  /* Text Formatting */
  .tiptap strong {
    @apply font-bold;
    color: hsl(var(--foreground));
  }

  .tiptap em {
    @apply italic;
  }

  .tiptap u {
    @apply underline;
  }

  .tiptap mark {
    @apply px-1 rounded;
    @apply bg-yellow-200 dark:bg-yellow-500/30;
    @apply text-yellow-900 dark:text-yellow-200;
  }

  /* Links */
  .tiptap a {
    @apply underline;
    color: hsl(var(--primary));
  }

  .tiptap a:hover {
    color: hsl(var(--primary) / 0.8);
  }

  /* Lists */
  .tiptap ul,
  .tiptap ol {
    @apply pl-6 space-y-2;
  }

  .tiptap ul[data-type="taskList"] {
    @apply list-none pl-0;
  }

  .tiptap ul[data-type="taskList"] li {
    @apply flex items-start gap-2;
  }

  .tiptap ul[data-type="taskList"] li > label {
    @apply flex-shrink-0 mt-1;
  }

  .tiptap ul[data-type="taskList"] li > div {
    @apply flex-1;
  }

  /* Blockquotes */
  .tiptap blockquote {
    @apply border-l-4 pl-4 py-2 my-4;
    border-color: hsl(var(--primary));
    color: hsl(var(--muted-foreground));
  }

  /* Code */
  .tiptap code {
    @apply px-1.5 py-0.5 rounded text-sm;
    background-color: hsl(var(--muted));
    color: hsl(var(--foreground));
  }

  .tiptap pre {
    @apply p-4 rounded-lg overflow-x-auto my-4;
    background-color: hsl(var(--muted));
  }

  .tiptap pre code {
    @apply p-0 bg-transparent;
  }

  /* Images */
  .tiptap img {
    @apply max-w-full h-auto rounded-lg my-4;
  }

  /* Horizontal Rule */
  .tiptap hr {
    @apply my-6;
    border-color: hsl(var(--border));
  }

  /* Paragraphs */
  .tiptap p {
    @apply mb-4;
    color: hsl(var(--foreground));
  }

  /* Template/Macro Selectors - Professional Dark Theme */
  .template-section {
    @apply py-2;
  }

  .template-section-title {
    @apply text-xs font-semibold uppercase px-3 py-2 tracking-wider;
    color: hsl(var(--muted-foreground));
  }

  .template-list {
    @apply space-y-0.5;
  }

  .template-item {
    @apply flex items-center gap-3 px-3 py-2.5 cursor-pointer transition-colors;
  }

  .template-item:hover {
    background-color: hsl(var(--muted) / 0.5);
  }

  .template-modality-badge {
    @apply text-[10px] font-bold px-2 py-0.5 rounded whitespace-nowrap min-w-[32px] text-center;
    background-color: hsl(var(--primary) / 0.2);
    color: hsl(var(--primary));
  }

  .template-title {
    @apply flex-1 text-sm truncate;
    color: hsl(var(--foreground));
  }

  .template-star {
    @apply p-1 rounded transition-colors;
    color: hsl(var(--muted-foreground));
  }

  .template-star:hover {
    background-color: hsl(var(--muted) / 0.5);
  }

  .template-star.favorited {
    color: #fbbf24;
  }

  .template-star.favorited svg {
    fill: #fbbf24;
  }

  /* Voice Components - Professional Dark Theme */
  .voice-button {
    @apply inline-flex items-center gap-2 px-3 py-2 rounded-lg transition-all duration-200;
    @apply bg-muted/50 hover:bg-muted;
    @apply border border-border/40;
    color: hsl(var(--foreground));
  }

  .voice-button.recording {
    @apply bg-red-500/20 border-red-500/40;
    color: hsl(var(--destructive));
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  .btn-toolbar {
    @apply inline-flex items-center gap-2 px-3 py-2 rounded-lg transition-all duration-200;
    @apply bg-muted/50 hover:bg-muted;
    @apply border border-border/40;
    color: hsl(var(--foreground));
  }

  .btn-toolbar:disabled {
    @apply opacity-50 cursor-not-allowed;
  }

  .speech-status-panel {
    @apply inline-flex items-center gap-2 px-3 py-2 rounded-lg;
    @apply bg-muted/30 border border-border/40;
  }

  .status-dot {
    @apply w-2 h-2 rounded-full transition-all duration-300;
  }

  .dot-idle {
    @apply bg-gray-400;
  }

  .dot-on {
    @apply bg-green-500;
    box-shadow: 0 0 8px hsla(142, 76%, 36%, 0.6);
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  .dot-processing {
    @apply bg-yellow-500;
    animation: pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  .dot-error {
    @apply bg-red-500;
  }

  .audio-meter {
    @apply inline-flex items-center gap-1;
  }

  .audio-bar {
    @apply w-1 h-3 rounded-full bg-muted-foreground/30 transition-all duration-150;
  }

  .audio-bar.on {
    @apply bg-green-500;
    box-shadow: 0 0 4px hsla(142, 76%, 36%, 0.4);
  }

  @keyframes pulse {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.5;
    }
  }

  /* Responsividade Mobile/Tablet */
  @media (max-width: 768px) {
    .template-title {
      @apply max-w-[180px];
    }
  }

  @media (max-width: 640px) {
    .template-title {
      @apply max-w-[140px];
    }
    
    .template-modality-badge {
      @apply text-[9px] px-1.5 min-w-[28px];
    }
  }

  /* Table Viewer Container - Force dark text for readability */
  .table-viewer-container table {
    color: #1e293b !important;
  }

  .table-viewer-container table td,
  .table-viewer-container table th {
    color: #1e293b !important;
  }

  /* Informative Table Block - Non-editable reference tables in editor */
  .informative-table-block {
    @apply select-none cursor-default;
  }

  .informative-table-block:hover {
    border-color: rgba(6, 182, 212, 0.5);
  }

  /* Proteção completa contra edição do conteúdo interno */
  .informative-table-block * {
    user-select: none !important;
    -webkit-user-select: none !important;
    pointer-events: none !important;
    cursor: default !important;
  }

  /* Permite seleção do bloco inteiro para deletar */
  .ProseMirror .informative-table-block {
    pointer-events: auto;
  }

  /* When selected in TipTap */
  .ProseMirror .informative-table-block.ProseMirror-selectednode {
    outline: 2px solid rgb(6, 182, 212);
    outline-offset: 2px;
  }

  /* ============================================
     Informative Table - Light Theme Island
     Apenas background branco e proteção contra edição
     Estilos originais da tabela são preservados
     ============================================ */

  /* Container principal - sempre fundo branco */
  .informative-table-block {
    background: white !important;
  }

  /* Container da tabela - apenas fundo branco */
  .informative-table-content {
    background: white !important;
  }

  .table-viewer-container table caption {
    color: #0f172a !important;
    font-weight: 600;
  }

  .table-viewer-container table tfoot td {
    color: #334155 !important;
  }

  .table-viewer-container table tfoot a {
    color: #0066cc !important;
    text-decoration: underline;
  }

  .table-viewer-container table thead th {
    background-color: rgba(241, 245, 249, 0.8) !important;
  }
}
